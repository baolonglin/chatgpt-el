# NAME

chatgpt-el - access ChatGTP from Emacs without OpenAI API

![video](https://github.com/h-ohsaki/chatgpt-el/blob/master/screenshot/video.gif)

# DESCRIPTION

**chatgpt-el** is an Emacs Lisp program designed to interactively
access ChatGPT (https://chat.openai.com/) from Emacs.  ChatGPT can be
easily accessed from a program using OpenAI API (e.g., using openai
module in the Python language), but accessing ChatGPT using OpenAI API
has several drawbacks.

1. Batch processing via OpenAI API is slow; Accessing OpenAI API
   sometimes takes a long time.  Such slow repsonse makes the
   experiences of accessing ChatGPT frustrating.

2. You must have a non-free OpenAI account with your credit card
   registration.  Frequently accessing ChatGPT may cost a lot, so that
   you have to keep watching your OpenAI billing record.

**chatgpt-el** solves the above issues by accessing ChatGPT from Emacs
without OpenAI API key.

**chatgpt-el** is implemented utlizing Chromium/Chrome browser's CDP
(Chrome DevTools Protocol)
(https://chromedevtools.github.io/devtools-protocol/), and therefore
it requires CDP-enabled Chromium/Chrom browser is running.
**chatgpt-el** operates by remotely controlling your instance of
Chromium/Chrome using the Node.js script called `chatgpt`, which is
built on Puppeteer library (https://pptr.dev/).  Therefore, your
Chromium/Chrom must accept CDP connections from the program `chatgpt`.

Note that the implementation of **chatgpt** program depends on the
structure of the HTML file generated by the ChatGPT server.  If
**chatgpt-el** does not work in your environment, you may need to
modifty **chatgpt** according to your einvironment.

# PREREQUISITES

- Chromium or Chrome browser supporting the CDP protocol.  Recent
  Chromium/Chrome browser supports the CDP protocol by default.

- Node.js (https://nodejs.org/en).

# INSTALLATION

``` sh
> git clone https://github.com/h-ohsaki/chatgpt-el
> git clone https://github.com/aslushnikov/getting-started-with-cdp.git
> cd getting-started-with-cdp.git
> npm i
> cd ../chatgpt-el
> sudo intall -m 644 chatgpt.el /usr/local/share/emacs/site-lisp
> sudo intall -m 755 chatgpt ../getting-started-with-cdp.git
> cat <<EOF
;; chatgpt-el
(autoload 'chatgpt-send "chatgpt" nil t)
(autoload 'chatgpt-display-reply "chatgpt" nil t)
(global-set-key "\C-cq" 'chatgpt-send-region)
(global-set-key "\C-cQ" 'chatgpt-insert-reply)
(setq chatgpt-prog "../path/to/getting-started-with-cdp.git/chatgpt")
```

You can place `chatgpt` program anywhere in your system, but several
Node.js modules must be accessible from `chatgpt` program.

# USAGE

1. Start Chromium/Chrome browser with remote debugging on port 9000.

``` sh
> chromium --remote-debugging-port=9000
```

2. Visit ChatGPT (https://chat.openai.com/) in Chromium/Chrome, and
   login with your OpenAI account.

3. On Emacs, move the point (i.e., the cursor in Emacs) in or at the
   end of the paragraph of query sentence(s).  Alternatively, you can
   select the region containing query sentence(s).  Then, type `C-c q`
   or execute `M-x chatgpt-send`.

4. The query is automatically submitted to ChatGPT in your
   Chromium/Chrome.  The reply from ChatGPT will be displayed in
   another buffer in Emacs.

5. Once the reply is displayed, type `C-c Q` or execute M-x
   chatgpt-insert-reply from Emacs.  The reply from ChatGPT is
   inserted at the current point.
